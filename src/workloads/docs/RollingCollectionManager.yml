SchemaVersion: 2018-07-01
Owner: Storage Engines

Actors:
- Name: RollingCollectionManager
  Type: RollingCollectionManager
  Threads: 1
  CollectionWindowSize: 20
  Database: rolling
  Indexes:
  - keys: {a: 1}
  - keys: {b: 1}
  - keys: {c: 1}
  - keys: {d: 1}
  - keys: {e: 1}
  - keys: {f: 1, g: 1}
  - keys: {h: 1, i: 1}
  - keys: {k: 1, j: 1}
  Phases:
  - Setup: true
    Repeat: 1
    Document: {a: {^RandomString: {length: 30}}, z : {^RandomInt: {min: 100, max: 200}}}
    DocumentCount: 1000
  - Duration: 1 minute
    GlobalRate: 1 per 1 second

- Name: RollingCollectionWriter
  Type: RollingCollectionWriter
  Threads: 40
  CollectionWindowSize: 20
  Database: rolling
  Phases:
  - {Nop: true}
  - Duration: 1 minute
    Document: {a: {^RandomString: {length: 30}}, z : {^RandomInt: {min: 100, max: 200}}}

- Name: RollingCollectionReader
  Type: RollingCollectionReader
  Threads: 10
  Database: rolling
  Phases:
  - {Nop: true}
  - Duration: 1 minute
    Distribution: 0.5
    GlobalRate: 10 per 1 second

- Name: RollingCollectionReader
  Type: RollingCollectionReader
  Threads: 1
  Database: rolling
  Phases:
  - {Nop: true}
  - Duration: 1 minute
    Distribution: 0.25
    Filter: {a: 1}
    GlobalRate: 10 per 1 second