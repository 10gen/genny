# Example workload. Does insert 1, then goes to random node. Random
#  node chooses between doing insert2, query, or Finish. Finish is an
#  absorbing state -- the workload stops when it gets to Finish. There
#  is a sleep between every node to make it human watchable.

delay: &delay 1000

main : 
  seed: 234762873642
  name: main
  runLengthMs : 100000
  nodes: 
    - name : insert1
      print : Running insert1
      type : insert_one
      document : {x : a}
      next : sleep
    - name : sleep
      type : sleep
      next : random
      sleepMs : *delay
    - name : random
      print : In Random Choice
      type : random_choice
      next : 
        insert2 : 0.45
        query : 0.45
        Finish : 0.1
    - name : insert2
      print : Running insert2
      type : insert_one
      document : {x : b}
      next : sleep
    - name : query
      print : Running query
      type : find
      filter : { x : a }
      next : sleep

