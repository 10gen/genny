# Simple example of different operation types
 
main : 
  seed: 131415161718
  name: main
  tvariables: 
    threadVar : 1
  wvariables : 
    workloadVar : 1
  nodes: 
    - type : drop
    - 
      type : command
      command : 
        create : testCollection
    -
      type : insert_many
      container :
        - {x : a}
        - {x : a}
        - {x : a}
        - {x : a}
        - {x : a}
        - {x : a}
        - {x : a}
        - {x : 1}
        - {x : 2}
        - {y : -3}
        - {y : b}
        - {y : b}
      options : 
        write_concern : 
          nodes : 1
    -
      type : insert_one
      document : {x : a}
      options : 
        write_concern : 
          nodes : 1
    - 
      type : count
      filter : { y : b } 
      assertEquals : 2
    - 
      type : find
      filter : { x : a } 
      options : 
        batch_size : 10
        limit : 2
    - 
      type : find_one
      filter : { x : a } 
    - 
      type : find_one_and_delete
      filter : { x : a } 
    - 
      type : find_one_and_replace
      filter : { x : a } 
      replace : { z : a }
    - 
      type : find_one_and_update
      filter : { x : a } 
      update : { $set : {z : a}}
    - 
      type : delete_one
      filter : {y : -3}
    - 
      type : delete_many
      filter : { y : b}
    - 
      type : distinct
      distinct_name : distinct
      filter : { x : 1 }
    - 
      type : create_index
      keys : { x : 1 } 
    - 
      type : list_indexes
    - 
      type : name
    - 
      type : replace_one
      filter : { x : 1 } 
      replacement : { z1 : b }
    - 
      type : update_one
      filter : {x : a} 
      update : { $inc : { i : 1 }}
    - 
      type : update_many
      filter : {x : a} 
      update : { $inc : { i : 1 }}
    - 
      type : set_variable
      targetVariable : workloadVar
      value : 2
    - type : set_variable
      targetVariable : threadVar
      value : 2
    - type : set_variable
      targetVariable : NewVariable
      value : 3
    - type : set_variable # This changes the database name used by operations
      targetVariable : DBName
      value : NewDBName
    - type : set_variable # This changes the collection name used by operations
      targetVariable : CollectionName
      value : NewCollectionName
    #Check that we have the right number of documents of each type
    - type : count
      filter: { x : a}
      assertEquals : 6
    - type : count
      filter : {x: a, i : 2}
      assertEquals : 1
    - type : count
      filter : {x: a, i : 1}
      assertEquals : 5
    - type : count 
      filter : {z : a}
      assertEquals : 2
    - type : count 
      filter : {x : a, z : a}
      assertEquals : 1
    - type : count
      filter : {z1 : b}
      assertEquals : 1
    - type : count
      filter : {x : 2}
      assertEquals : 1
    - type : count
      filter : {y : b}
      assertEquals : 0
