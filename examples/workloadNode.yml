# Use the workload Node functionality
# Runs the same embedded workload twice. Once with default settings, and once with overriden settings.

# Base workload
workload : &work
  name : embeddedWorkload
  database : testDB1
  collection : testCollection1
  runLengthMs : 5000
  threads : 5
  nodes :
    - type : sleep
      sleepMs : 1
      print : In sleep

main :
  seed: 131415161718
  name: main
  tvariables :
    threads : 6
    dbname : vardbname
  nodes:
    - type : workloadNode # Run the workload as is.
      workload : *work
    - &workOverrides
      type : workloadNode # Run the workload while changing settings of the embedded workload.
      overrides : # These setting override what is set in the embedded workload
        threads :
          type : increment
          variable : threads
        database :
          type : usevar
          variable : dbname
        collection : testCollection2
        runLengthMs : 10000
        name : NewName
      workload : *work
    - *workOverrides