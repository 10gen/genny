# Example workload. Does insert 1, then goes to random node. Random
#  node chooses between doing insert2 or query, and then back to the
#  random choice. There is a sleep between every node to make it human
#  watchable.

runLengthMs: &run 10000
delay: &delay 1000

main : 
  seed: 131415161718
  name: main
  threads : 10
  runLengthMs : *run
  nodes: 
    - name : insert1
      print : Running insert1
      type : insert_one
      document : {x : a}
      next : sleep
    - name : random
      print : In Random Choice
      type : random_choice
      next : 
        insert2 : 0.5
        query : 0.5
    - name : sleep
      type : sleep
      next : random
      sleepMs : *delay
    - name : insert2
      print : Running insert2
      type : insert_one
      document : {x : b}
      next : sleep
    - name : query
      print : Running query
      type : find
      filter : { x : a }
      next : sleep


